<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0">
<title>Verlix AI</title>
<style>
  @import url('https://fonts.googleapis.com/css2?family=DM+Sans:ital,wght@0,300;0,400;0,500;0,600;1,300&family=Playfair+Display:ital,wght@0,700;1,500&display=swap');

  :root {
    --bg: #fdf6f9;
    --surface: #ffffff;
    --border: #f0d9e8;
    --accent: #d45c8a;
    --accent-light: #f7c5dc;
    --accent2: #a855a0;
    --text: #2d1a26;
    --muted: #a07090;
    --user-bg: #f9e8f2;
    --ai-bg: #ffffff;
    --shadow: rgba(212, 92, 138, 0.12);
  }

  * { box-sizing: border-box; margin: 0; padding: 0; }

  body {
    background: var(--bg);
    color: var(--text);
    font-family: 'DM Sans', sans-serif;
    height: 100dvh;
    display: flex;
    flex-direction: column;
    overflow: hidden;
    position: relative;
  }

  /* Soft background blobs */
  body::before {
    content: '';
    position: fixed;
    top: -80px; right: -80px;
    width: 260px; height: 260px;
    border-radius: 50%;
    background: radial-gradient(circle, rgba(212,92,138,0.18) 0%, transparent 70%);
    pointer-events: none;
    z-index: 0;
  }

  body::after {
    content: '';
    position: fixed;
    bottom: -60px; left: -60px;
    width: 220px; height: 220px;
    border-radius: 50%;
    background: radial-gradient(circle, rgba(168,85,160,0.15) 0%, transparent 70%);
    pointer-events: none;
    z-index: 0;
  }

  /* Header */
  header {
    padding: 16px 20px;
    background: var(--surface);
    border-bottom: 1px solid var(--border);
    display: flex;
    align-items: center;
    gap: 10px;
    position: relative;
    z-index: 10;
    flex-shrink: 0;
    box-shadow: 0 2px 12px var(--shadow);
  }

  .logo-wrap {
    width: 34px; height: 34px;
    border-radius: 50%;
    background: linear-gradient(135deg, #f7c5dc, #d45c8a);
    display: flex; align-items: center; justify-content: center;
    font-size: 16px;
    box-shadow: 0 2px 8px rgba(212,92,138,0.35);
    flex-shrink: 0;
  }

  header h1 {
    font-family: 'Playfair Display', serif;
    font-style: italic;
    font-size: 20px;
    font-weight: 500;
    color: var(--accent);
    letter-spacing: 0.02em;
  }

  .status-dot {
    width: 7px; height: 7px;
    border-radius: 50%;
    background: #4ade80;
    margin-left: 2px;
    box-shadow: 0 0 6px #4ade80;
    animation: pulse 2s ease-in-out infinite;
    flex-shrink: 0;
  }

  @keyframes pulse {
    0%, 100% { opacity: 1; }
    50% { opacity: 0.4; }
  }

  .header-right {
    margin-left: auto;
    display: flex;
    align-items: center;
    gap: 8px;
  }

  /* Setup screen */
  #setup {
    flex: 1;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    padding: 32px 24px;
    gap: 18px;
    position: relative;
    z-index: 1;
  }

  .setup-icon {
    width: 72px; height: 72px;
    border-radius: 50%;
    background: linear-gradient(135deg, #fce7f3, #f9a8d4, #d45c8a);
    display: flex; align-items: center; justify-content: center;
    font-size: 32px;
    box-shadow: 0 8px 24px rgba(212,92,138,0.3);
    animation: float 3s ease-in-out infinite;
  }

  @keyframes float {
    0%, 100% { transform: translateY(0); }
    50% { transform: translateY(-6px); }
  }

  #setup h2 {
    font-family: 'Playfair Display', serif;
    font-style: italic;
    font-size: 26px;
    color: var(--accent);
    text-align: center;
  }

  #setup p {
    font-size: 13px;
    color: var(--muted);
    text-align: center;
    line-height: 1.7;
    max-width: 280px;
    font-weight: 300;
  }

  #setup a { color: var(--accent); text-decoration: none; font-weight: 500; }

  .setup-box {
    background: var(--surface);
    border: 1px solid var(--border);
    border-radius: 20px;
    padding: 20px;
    width: 100%;
    max-width: 340px;
    box-shadow: 0 4px 20px var(--shadow);
    display: flex;
    flex-direction: column;
    gap: 12px;
  }

  .setup-label {
    font-size: 11px;
    font-weight: 600;
    color: var(--muted);
    letter-spacing: 0.08em;
    text-transform: uppercase;
  }

  input[type="password"], input[type="text"] {
    width: 100%;
    background: var(--bg);
    border: 1.5px solid var(--border);
    color: var(--text);
    font-family: 'DM Sans', sans-serif;
    font-size: 13px;
    padding: 11px 14px;
    border-radius: 12px;
    outline: none;
    transition: border-color 0.2s, box-shadow 0.2s;
  }

  input:focus {
    border-color: var(--accent);
    box-shadow: 0 0 0 3px rgba(212,92,138,0.12);
  }

  .btn-primary {
    width: 100%;
    background: linear-gradient(135deg, #e8729a, #d45c8a);
    color: white;
    border: none;
    font-family: 'DM Sans', sans-serif;
    font-weight: 600;
    font-size: 14px;
    padding: 13px;
    border-radius: 14px;
    cursor: pointer;
    letter-spacing: 0.02em;
    transition: opacity 0.2s, transform 0.15s, box-shadow 0.2s;
    box-shadow: 0 4px 14px rgba(212,92,138,0.4);
  }

  .btn-primary:active { transform: scale(0.97); opacity: 0.9; }
  .btn-primary:disabled { opacity: 0.5; cursor: not-allowed; }

  /* Chat area */
  #chat-area {
    display: none;
    flex: 1;
    flex-direction: column;
    overflow: hidden;
    position: relative;
    z-index: 1;
  }

  #messages {
    flex: 1;
    overflow-y: auto;
    padding: 20px 16px;
    display: flex;
    flex-direction: column;
    gap: 14px;
    scroll-behavior: smooth;
  }

  #messages::-webkit-scrollbar { width: 3px; }
  #messages::-webkit-scrollbar-track { background: transparent; }
  #messages::-webkit-scrollbar-thumb { background: var(--accent-light); border-radius: 2px; }

  .msg {
    display: flex;
    gap: 8px;
    animation: fadeUp 0.3s ease;
  }

  @keyframes fadeUp {
    from { opacity: 0; transform: translateY(10px); }
    to { opacity: 1; transform: translateY(0); }
  }

  .msg.user { flex-direction: row-reverse; }

  .avatar {
    width: 30px; height: 30px;
    border-radius: 50%;
    display: flex; align-items: center; justify-content: center;
    font-size: 13px;
    flex-shrink: 0;
    margin-top: 2px;
  }

  .msg.ai .avatar {
    background: linear-gradient(135deg, #fce7f3, #d45c8a);
    box-shadow: 0 2px 8px rgba(212,92,138,0.3);
  }

  .msg.user .avatar {
    background: linear-gradient(135deg, #a855a0, #7c3aed);
    box-shadow: 0 2px 8px rgba(168,85,160,0.3);
    color: white;
    font-size: 11px;
    font-weight: 600;
  }

  .bubble {
    max-width: 78%;
    padding: 11px 14px;
    border-radius: 18px;
    font-size: 13.5px;
    line-height: 1.65;
    white-space: pre-wrap;
    word-break: break-word;
    font-weight: 400;
  }

  .msg.ai .bubble {
    background: var(--ai-bg);
    border: 1px solid var(--border);
    border-top-left-radius: 4px;
    box-shadow: 0 2px 10px var(--shadow);
  }

  .msg.user .bubble {
    background: linear-gradient(135deg, #f9e8f2, #f5d0e8);
    border: 1px solid var(--accent-light);
    border-top-right-radius: 4px;
    color: var(--text);
  }

  .bubble code {
    background: #fce7f3;
    color: var(--accent2);
    padding: 1px 6px;
    border-radius: 5px;
    font-size: 12px;
    font-family: monospace;
  }

  .bubble pre {
    background: #2d1a26;
    border-radius: 10px;
    padding: 12px;
    overflow-x: auto;
    margin: 8px 0;
    font-size: 11.5px;
    line-height: 1.5;
  }

  .bubble pre code {
    background: none;
    color: #f9a8d4;
    padding: 0;
  }

  /* Typing */
  .typing-indicator {
    display: flex;
    gap: 5px;
    align-items: center;
    padding: 4px 2px;
  }

  .typing-indicator span {
    width: 7px; height: 7px;
    border-radius: 50%;
    background: var(--accent-light);
    animation: bounce 1.2s ease-in-out infinite;
  }

  .typing-indicator span:nth-child(2) { animation-delay: 0.2s; background: var(--accent); }
  .typing-indicator span:nth-child(3) { animation-delay: 0.4s; }

  @keyframes bounce {
    0%, 60%, 100% { transform: translateY(0); }
    30% { transform: translateY(-7px); }
  }

  /* Input area */
  #input-area {
    padding: 12px 16px 16px;
    background: var(--surface);
    border-top: 1px solid var(--border);
    display: flex;
    gap: 8px;
    align-items: flex-end;
    flex-shrink: 0;
    box-shadow: 0 -2px 12px var(--shadow);
  }

  #user-input {
    flex: 1;
    background: var(--bg);
    border: 1.5px solid var(--border);
    color: var(--text);
    font-family: 'DM Sans', sans-serif;
    font-size: 13.5px;
    font-weight: 400;
    padding: 11px 14px;
    border-radius: 16px;
    resize: none;
    outline: none;
    min-height: 44px;
    max-height: 120px;
    overflow-y: auto;
    transition: border-color 0.2s, box-shadow 0.2s;
    line-height: 1.5;
  }

  #user-input:focus {
    border-color: var(--accent);
    box-shadow: 0 0 0 3px rgba(212,92,138,0.1);
  }

  #user-input::placeholder { color: var(--muted); }

  #send-btn {
    width: 44px; height: 44px;
    padding: 0;
    border-radius: 50%;
    background: linear-gradient(135deg, #e8729a, #d45c8a);
    border: none;
    display: flex; align-items: center; justify-content: center;
    flex-shrink: 0;
    cursor: pointer;
    box-shadow: 0 3px 12px rgba(212,92,138,0.4);
    transition: transform 0.15s, opacity 0.2s;
  }

  #send-btn:active { transform: scale(0.92); }
  #send-btn:disabled { opacity: 0.4; cursor: not-allowed; }
  #send-btn svg { width: 17px; height: 17px; color: white; }

  /* Reset btn */
  .reset-btn {
    background: transparent;
    border: 1px solid var(--border);
    color: var(--muted);
    font-family: 'DM Sans', sans-serif;
    font-size: 11px;
    padding: 4px 10px;
    border-radius: 20px;
    cursor: pointer;
    transition: all 0.2s;
  }

  .reset-btn:hover { border-color: var(--accent); color: var(--accent); }

  /* Welcome */
  .welcome {
    text-align: center;
    padding: 28px 16px;
  }

  .welcome-icon {
    font-size: 40px;
    margin-bottom: 10px;
    display: block;
    animation: float 3s ease-in-out infinite;
  }

  .welcome h3 {
    font-family: 'Playfair Display', serif;
    font-style: italic;
    font-size: 22px;
    color: var(--accent);
    margin-bottom: 6px;
  }

  .welcome p {
    font-size: 12.5px;
    color: var(--muted);
    line-height: 1.7;
    font-weight: 300;
  }

  .chips {
    display: flex;
    flex-wrap: wrap;
    justify-content: center;
    gap: 6px;
    margin-top: 14px;
  }

  .chip {
    background: var(--surface);
    border: 1px solid var(--border);
    color: var(--muted);
    font-size: 11.5px;
    padding: 5px 12px;
    border-radius: 20px;
    cursor: pointer;
    transition: all 0.2s;
    font-family: 'DM Sans', sans-serif;
  }

  .chip:hover {
    border-color: var(--accent);
    color: var(--accent);
    background: #fdf0f6;
  }
</style>
</head>
<body>

<header>
  <div class="logo-wrap">üå∏</div>
  <h1>Verlix</h1>
  <div class="status-dot"></div>
  <div class="header-right" id="header-right">
    <span style="font-size:11px;color:var(--muted)">AI Assistant</span>
  </div>
</header>

<!-- Setup -->
<div id="setup">
  <div class="setup-icon">üå∏</div>
  <h2>Hi, I'm Verlix!</h2>
  <p>Asisten AI yang siap bantu kamu dengan apapun ‚Äî coding, ide, pertanyaan, semuanya~</p>

  <div class="setup-box">
    <div class="setup-label">Groq API Key</div>
    <input type="password" id="api-key-input" placeholder="gsk_..." />
    <p style="font-size:11px;color:var(--muted);line-height:1.6;">
      Ambil API Key gratis di <a href="https://console.groq.com" target="_blank">console.groq.com</a> ‚ú®
    </p>
    <button class="btn-primary" onclick="saveKey()">Mulai Chat üíï</button>
  </div>
</div>

<!-- Chat -->
<div id="chat-area">
  <div id="messages">
    <div class="welcome">
      <span class="welcome-icon">üå∏</span>
      <h3>Haii, aku Verlix!</h3>
      <p>Tanya apa aja ya, aku siap bantu~<br>Coding, nulis, ide kreatif, atau sekedar ngobrol!</p>
      <div class="chips">
        <div class="chip" onclick="quickSend('Buatin script Python sederhana')">üêç Script Python</div>
        <div class="chip" onclick="quickSend('Bantu aku nulis caption Instagram yang aesthetic')">‚ú® Caption IG</div>
        <div class="chip" onclick="quickSend('Rekomendasiin drama Korea terbaru')">üé¨ Drama Korea</div>
        <div class="chip" onclick="quickSend('Jelaskan cara belajar coding dari nol')">üíª Belajar Coding</div>
      </div>
    </div>
  </div>
  <div id="input-area">
    <textarea id="user-input" placeholder="Ketik pesanmu di sini... üí¨" rows="1"></textarea>
    <button id="send-btn" onclick="sendMessage()">
      <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round">
        <line x1="22" y1="2" x2="11" y2="13"></line>
        <polygon points="22 2 15 22 11 13 2 9 22 2"></polygon>
      </svg>
    </button>
  </div>
</div>

<script>
  let apiKey = localStorage.getItem('verlix_key') || '';
  let history = [];
  let isLoading = false;

  const MODEL = 'llama-3.3-70b-versatile';

  const SYSTEM_PROMPT = `Kamu adalah Verlix, asisten AI yang cerdas, ramah, dan helpful.
Kamu memiliki kepribadian yang hangat, friendly, dan sedikit playful tapi tetap profesional.
Kamu pintar dalam coding, teknologi, kreativitas, dan berbagai topik lainnya.
Jawab dalam bahasa yang sama dengan user (Indonesia atau Inggris).
Untuk kode, gunakan markdown code block dengan bahasa yang tepat.
Jawaban jelas dan lengkap, tapi tidak bertele-tele.
Sesekali boleh pakai emoji yang sesuai agar lebih hangat, tapi jangan berlebihan.`;

  if (apiKey) showChat();

  function saveKey() {
    const key = document.getElementById('api-key-input').value.trim();
    if (!key) { alert('Masukkan API Key dulu ya! üå∏'); return; }
    apiKey = key;
    localStorage.setItem('verlix_key', apiKey);
    showChat();
  }

  function showChat() {
    document.getElementById('setup').style.display = 'none';
    document.getElementById('chat-area').style.display = 'flex';
    document.getElementById('header-right').innerHTML =
      '<button class="reset-btn" onclick="resetKey()">Ganti Key</button>';
    document.getElementById('user-input').focus();
  }

  function resetKey() {
    if (!confirm('Ganti API Key?')) return;
    localStorage.removeItem('verlix_key');
    location.reload();
  }

  function quickSend(text) {
    document.getElementById('user-input').value = text;
    sendMessage();
  }

  const textarea = document.getElementById('user-input');
  textarea.addEventListener('input', function() {
    this.style.height = 'auto';
    this.style.height = Math.min(this.scrollHeight, 120) + 'px';
  });

  textarea.addEventListener('keydown', function(e) {
    if (e.key === 'Enter' && !e.shiftKey) {
      e.preventDefault();
      sendMessage();
    }
  });

  function addMessage(role, content) {
    const msgs = document.getElementById('messages');
    const div = document.createElement('div');
    div.className = `msg ${role}`;

    const avatar = document.createElement('div');
    avatar.className = 'avatar';
    avatar.textContent = role === 'ai' ? 'üå∏' : 'U';

    const bubble = document.createElement('div');
    bubble.className = 'bubble';
    bubble.innerHTML = formatMessage(content);

    div.appendChild(avatar);
    div.appendChild(bubble);
    msgs.appendChild(div);
    msgs.scrollTop = msgs.scrollHeight;
  }

  function formatMessage(text) {
    text = text.replace(/```(\w*)\n?([\s\S]*?)```/g, (_, lang, code) =>
      `<pre><code>${escapeHtml(code.trim())}</code></pre>`
    );
    text = text.replace(/`([^`]+)`/g, '<code>$1</code>');
    text = text.replace(/\*\*(.*?)\*\*/g, '<strong>$1</strong>');
    text = text.replace(/\*(.*?)\*/g, '<em>$1</em>');
    return text;
  }

  function escapeHtml(t) {
    return t.replace(/&/g,'&amp;').replace(/</g,'&lt;').replace(/>/g,'&gt;');
  }

  function showTyping() {
    const msgs = document.getElementById('messages');
    const div = document.createElement('div');
    div.className = 'msg ai';
    div.id = 'typing-msg';

    const avatar = document.createElement('div');
    avatar.className = 'avatar';
    avatar.textContent = 'üå∏';

    const bubble = document.createElement('div');
    bubble.className = 'bubble';
    bubble.innerHTML = '<div class="typing-indicator"><span></span><span></span><span></span></div>';

    div.appendChild(avatar);
    div.appendChild(bubble);
    msgs.appendChild(div);
    msgs.scrollTop = msgs.scrollHeight;
  }

  function removeTyping() {
    const t = document.getElementById('typing-msg');
    if (t) t.remove();
  }

  async function sendMessage() {
    if (isLoading) return;
    const input = document.getElementById('user-input');
    const text = input.value.trim();
    if (!text) return;

    input.value = '';
    input.style.height = 'auto';
    isLoading = true;
    document.getElementById('send-btn').disabled = true;

    addMessage('user', text);
    history.push({ role: 'user', content: text });

    showTyping();

    try {
      const response = await fetch('https://api.groq.com/openai/v1/chat/completions', {
        method: 'POST',
        headers: {
          'Content-Type': 'application/json',
          'Authorization': `Bearer ${apiKey}`
        },
        body: JSON.stringify({
          model: MODEL,
          max_tokens: 2048,
          messages: [
            { role: 'system', content: SYSTEM_PROMPT },
            ...history
          ]
        })
      });

      const data = await response.json();

      if (!response.ok) {
        throw new Error(data.error?.message || `Error ${response.status}`);
      }

      const reply = data.choices[0].message.content;
      history.push({ role: 'assistant', content: reply });

      removeTyping();
      addMessage('ai', reply);

    } catch (err) {
      removeTyping();
      addMessage('ai', `Aduh, ada error nih üò¢\n\n${err.message}\n\nCoba cek API Key kamu ya!`);
    }

    isLoading = false;
    document.getElementById('send-btn').disabled = false;
    input.focus();
  }
</script>
</body>
  </html>
  
